<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>

    {% block head %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script type="text/javascript">
        {% include "js/base.js" %}
        {% include "js/jquery.min.js" %}
        {% include "js/bootstrap.min.js" %}
    </script>

	<script language="javascript">
	</script>
    <title>{{results.name}}</title>
    <style type="text/css">
    </style>
	{% endblock %}
</head>
<body>
<div style="width:90%;margin:0 auto">
	<div class="row clearfix">
		<div class="col-md-12 column">
			<div class="jumbotron well">
				<div>
					<center><h2> {{results.name}} </h2></center>
					<br>
				</div>
				<table class="table">
						<thead>
							<tr >
								<th>Platform</th>
                                <th>Haf Version</th>
                                <th>Suites</th>
								<th>Begin Time</th>
								<th>End Time</th>
								<th>Duration Time</th>
								<th>Pass</th>
								<th>Fail</th>
								<th>Error</th>
								<th>Skip</th>
								<th>All</th>
							</tr>
						</thead>
						<tbody>
							<tr >
								<td>{{results.platform}}</td>
								<td>{{results.version}}</td>
                                <td>

                                    <li><a onclick="showElement('all_suites')">all suites</a></li>
									<ul id="all_suites" style="display:none">
										{% block suite_temp %}
										{% set i = 0 %}
										{% for suite in results.suite_name %}
										<li><a onclick="showElement('{{suite}}')">[{{suite}}]</a></li>
										{% if i%3 == 0 %}
										<br>
										{% endif %}
										{% set i = i + 1 %}
										{% endfor %}
										{% endblock %}
									</ul>

                                </td>
								<td>{{results.begin_time}}</td>
								{% if results.end_time %}
								<td>{{results.end_time}}</td>
								{% else %}
								<td>running...</td>
								{% endif %}
								<td>{{results.duration}}</td>
								<td>{{results.passed}}</td>
								<td>{{results.failed}}</td>
								<td>{{results.error}}</td>
								<td>{{results.skip}}</td>
								<td>{{results.all}}</td>
							</tr>
						</tbody>
				</table>
			</div>
			<div>
			<table class="table">
				<thead>
					<tr>
						<th>Suite Name</th>
                        <th>Base Url</th>
						<th>Begin Time</th>
						<th>End Time</th>
						<th>Duration Time</th>
						<th>Pass</th>
						<th>Fail</th>
						<th>Error</th>
						<th>Skip</th>
						<th>All</th>
					</tr>
				</thead>
				<tbody>
					{% for suite_summary in results.summary.keys() %}
					<tr>
					<td><a onclick="showElement('{{suite_summary}}')">{{suite_summary}}</a></td>
                    <td>{{results.summary.get(suite_summary).get("base_url")}}</td>
					<td>{{results.summary.get(suite_summary).get("begin_time")}}</td>
					<td>{{results.summary.get(suite_summary).get("end_time")}}</td>
					<td>{{results.summary.get(suite_summary).get("duration")}}</td>
					<td>{{results.summary.get(suite_summary).get("passed")}}</td>
					<td>{{results.summary.get(suite_summary).get("failed")}}</td>
					<td>{{results.summary.get(suite_summary).get("error")}}</td>
					<td>{{results.summary.get(suite_summary).get("skip")}}</td>
					<td>{{results.summary.get(suite_summary).get("all")}}</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
	<div class="row clearfix">
		{% block suites %}
		{% for suite in results.details.keys() %}
		<div class="col-md-12 column">
			<div class="row clearfix">
				<div class="col-md-12 column">
					<nav class="navbar navbar-default" role="navigation">
						<div class="navbar-header">
							 <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
								 <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span>
								 <span class="icon-bar"></span>
							 </button>
                             <a class="navbar-brand" onclick="showElement('{{suite}}')">{{suite}}</a>
                        </div>
					</nav>
				</div>

				<div id="{{suite}}" class="jumbotron well" style="display:none">
				<table class="table">
				<thead>
					<tr>
						<th>Case Id</th>
						<th>Params</th>
						<th>Request</th>
						<th>Response</th>
						<th>Check</th>
                        <th>Time</th>
						<th>DependenceCase</th>
                        <th>Runner</th>
						<th>Result</th>
					</tr>
				</thead>
				<tbody>
					{% for case in results.details.get(suite).cases %}
					{% set infos = ["success","danger", "", "warning"] %}
                    {% set id='{}.{}.{}.{}'.format(case.case.bench_name, case.case.ids.id, case.case.ids.subid, case.case.ids.name) %}
					{% set id_temp = '{}.{}.{}'.format(case.case.ids.id, case.case.ids.subid, case.case.ids.name) %}
					<tr class="{{infos[case.result-50]}}" id="{{id}}">
						<td>{{id_temp}}</td>
						<td>
							<li onclick="showElement('{{id}}-params')">Params</li>
							<ul id="{{id}}-params" style="display:none">
								<li>
									<pre>{{case.case.param}}</pre>
								</li>
							</ul>
						</td>
						<td>
                            <li>url : {{case.case.request.url}}</li>
                            <li onclick="showElement('{{case.case.request}}')" ><a>all</a></li>
                            <ul id="{{case.case.request}}" style="display:none">
                                <li>header :
									<pre>{{case.case.request.header}}</pre>
								</li>
                                <li>data :
									<pre>{{case.case.request.data}}</pre>
								</li>
                            </ul>
                        </td>
						<td>
                            {% set response=case.case.response.deserialize() %}
                            <li >code : {{response.get("code")}}</li>
                            <li onclick="showElement('{{case.case.response}}')" ><a>all</a></li>
                            <ul id="{{case.case.response}}" style="display:none">
                                <li style="hidden:none">
									header :
									<pre>{{response.get("header")}}</pre>
								</li>
                                <li style="hidden:none">
									body :
									<pre>{{response.get("body")}}</pre>
								</li>
                            </ul>
                        </td>
						<td>
                            {% set check1=case.result_check_response %}
                            <li onclick="showElement('{{'{}.{}.{}.{}.response_check'.format(case.case.bench_name, case.case.ids.id, case.case.ids.subid, case.case.ids.name)}}')"><a>response check</a></li>
                            <ul id="{{'{}.{}.{}.{}.response_check'.format(case.case.bench_name, case.case.ids.id, case.case.ids.subid, case.case.ids.name)}}" style="display:none">
                                <li>result:{{check1}}</li>
								<li>code check:
									<pre>{{case.result_check_response[0]}}</pre>
								</li>
                                <li><a href="file:///{{case.log_dir}}">body check: {{case.result_check_response[1]}}</a></li>
                            </ul>
							{% set check2=case.result_check_sql_response %}
                            <li onclick="showElement('{{'{}.{}.{}.{}.sql_check'.format(case.case.bench_name, case.case.ids.id, case.case.ids.subid, case.case.ids.name)}}')"><a>sql check</a></li>
                            <ul id="{{'{}.{}.{}.{}.sql_check'.format(case.case.bench_name, case.case.ids.id, case.case.ids.subid, case.case.ids.name)}}" style="display:none">
								<li>result:{{check2}}</li>
								{% if case.case.sql_check_func != "" %}
								<li>check func: {{case.case.expect.sql_check_func}}</li>
								{% endif %}
                            </ul>

							<li onclick="showElement('{{'{}.{}.{}.{}.run_error'.format(case.case.bench_name, case.case.ids.id, case.case.ids.subid, case.case.ids.name)}}')"><a>run error</a></li>
							<div id="{{'{}.{}.{}.{}.run_error'.format(case.case.bench_name, case.case.ids.id, case.case.ids.subid, case.case.ids.name)}}" style="display:none">
								<pre> {{case.run_error}} </pre>
							</div>
                        </td>
                        <td>
                            <ul>
                                <li> {{"beg {}".format(case.begin_time)}}</li>
                                <li> {{"end {}".format(case.end_time)}}</li>
                                <li> {{"dur {}".format(case.duration)}}</li>
                            </ul>
                        </td>
						<td>
                            <ul>
                                {% for dep in case.case.dependent %}
                                <li>{{dep}}</li>
                                {% endfor %}
                            </ul>
                        </td>
                        <td>{{case.runner}}</td>
                        {% set result_group = ["PASS","FAIL","SKIP","ERROR" ] %}
						<td>{{result_group[case.result-50]}}</td>
					</tr>
					{% endfor %}
				</tbody>
				</table>
			</div>
			</div>
		</div>
		{% endfor %}
		{% endblock %}
	</div>
</div>
</div>
</body>
</html>